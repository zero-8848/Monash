SQL> SPOOL sql_portfolio1_output.txt
SQL> 
SQL> --****PLEASE ENTER YOUR DETAILS BELOW****
SQL> --sql_portfolio1.sql
SQL> 
SQL> --Student ID:32350686
SQL> --Student Name:Zirui Liu
SQL> --Unit Code:FIT2094
SQL> --Applied Class No:A01
SQL> 
SQL> /*Task 1: CREATE table INSPECT_ITEM and non FK constraints*/
SQL> -- CREATING table INSPECTION_ITEM
SQL> CREATE TABLE inspect_item (
  2      inspitem_id        NUMBER(7) NOT NULL,
  3      prop_no            NUMBER(4) NOT NULL,
  4      inspect_datetime   DATE NOT NULL,
  5      item_code          CHAR(3) NOT NULL,
  6      inspitem_result    CHAR(1) NOT NULL,
  7      inspitem_statement VARCHAR2(200)
  8  );

Table INSPECT_ITEM created.

SQL> 
SQL> COMMENT ON COLUMN inspect_item.inspitem_id IS
  2      'Inspect item unique identifier (surrogate key - unique for each inspect item
  3  record)';

Comment created.

SQL> 
SQL> COMMENT ON COLUMN inspect_item.prop_no IS
  2      'Property identifier';

Comment created.

SQL> 
SQL> COMMENT ON COLUMN inspect_item.inspect_datetime IS
  2      'Inspection date and time';

Comment created.

SQL> 
SQL> COMMENT ON COLUMN inspect_item.item_code IS
  2      'Item identifier';

Comment created.

SQL> 
SQL> COMMENT ON COLUMN inspect_item.inspitem_result IS
  2      'Result of inspection item:
  3  U: Urgent Action
  4  S: Standard Met
  5  N: Standard Not Met';

Comment created.

SQL> 
SQL> COMMENT ON COLUMN inspect_item.inspitem_statement IS
  2      'Brief statement of inspection item (when required)';

Comment created.

SQL> 
SQL> ALTER TABLE inspect_item ADD CONSTRAINT inspect_item_pk PRIMARY KEY ( inspitem_id );

Table INSPECT_ITEM altered.

SQL> 
SQL> ALTER TABLE inspect_item
  2      ADD CONSTRAINT uq_inspect_item UNIQUE ( prop_no,
  3                                              inspect_datetime,
  4                                              item_code );

Table INSPECT_ITEM altered.

SQL> 
SQL> ALTER TABLE inspect_item
  2      ADD CONSTRAINT ck_inspitem_result CHECK ( inspitem_result IN ( 'U', 'S', 'N' ) );

Table INSPECT_ITEM altered.

SQL> /*Task 1: Add FK constraints*/
SQL> ALTER TABLE inspect_item
  2      ADD CONSTRAINT inspect_item_inspection_fk FOREIGN KEY ( prop_no,
  3                                                              inspect_datetime )
  4          REFERENCES inspection ( prop_no,
  5                                  inspect_datetime );

Table INSPECT_ITEM altered.

SQL> 
SQL> ALTER TABLE inspect_item
  2      ADD CONSTRAINT inspect_item_item_fk FOREIGN KEY ( item_code )
  3          REFERENCES item ( item_code );

Table INSPECT_ITEM altered.

SQL> 
SQL> /*Task 2: Insert INSPECTOR, INSPECTION and INSPECT_ITEMs*/
SQL> INSERT INTO inspector VALUES (
  2      inspector_seq.NEXTVAL,
  3      'James',
  4      'Knight'
  5  );

1 row inserted.

SQL> 
SQL> INSERT INTO inspection VALUES (
  2      9346,
  3      TO_DATE('15-Dec-2022  10:00', 'dd-mm-yyyy hh24:mi'),
  4      inspector_seq.CURRVAL
  5  );

1 row inserted.

SQL> 
SQL> INSERT INTO inspect_item VALUES (
  2      inspitem_seq.NEXTVAL,
  3      9346,
  4      TO_DATE('15-Dec-2022 10:00 AM', 'dd-Mon-yyyy hh:mi AM'),
  5      'LCK',
  6      'U',
  7      'A locksmith has been called to fix the lock'
  8  );

1 row inserted.

SQL> 
SQL> INSERT INTO inspect_item VALUES (
  2      inspitem_seq.NEXTVAL,
  3      9346,
  4      TO_DATE('15-Dec-2022 10:00 AM', 'dd-Mon-yyyy hh:mi AM'),
  5      'MLD',
  6      'S',
  7      NULL
  8  );

1 row inserted.

SQL> 
SQL> COMMIT;

Commit complete.

SQL> /*Task 3: Change of status for mould and damp to Not Met*/
SQL> UPDATE inspect_item
  2  SET
  3      inspect_item.inspitem_result = 'N',
  4      inspect_item.inspitem_statement = 'all the rooms and found a small patch of mould is present in the main
  5  bathroom. Tenant has been advised to remove the mould with chemicals.'
  6  WHERE
  7          prop_no = 9346
  8      AND item_code = 'MLD'
  9      AND inspect_datetime = TO_DATE('15-Dec-2022 10:00 AM', 'dd-Mon-yyyy hh:mi AM');

1 row updated.

SQL> 
SQL> COMMIT;

Commit complete.

SQL> /*Task 4: Removal of inspection*/
SQL> DELETE inspect_item
  2  WHERE
  3          prop_no = 9346
  4      AND inspect_datetime = TO_DATE('15-Dec-2022 10:00 AM', 'dd-Mon-yyyy hh:mi AM');

2 rows deleted.

SQL> 
SQL> DELETE inspection
  2  WHERE
  3          prop_no = 9346
  4      AND inspect_datetime = TO_DATE('15-Dec-2022 10:00 AM', 'dd-Mon-yyyy hh:mi AM');

1 row deleted.

SQL> 
SQL> COMMIT;

Commit complete.

SQL> --Comment out SET ECHO and SPOOL commands before submitting your portfolio
SQL> --SPOOL OFF
SQL> --SET ECHO OFF
